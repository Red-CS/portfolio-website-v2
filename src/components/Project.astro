---
import { FiGithub, FiExternalLink } from 'react-icons/fi'
import type { ProjectType } from '@schemas'
import Icon from './Icon.astro'
import { Image } from 'astro:assets'

const isNonEmpty = (str: string | undefined) => {
  if (str === undefined) return false
  return str.trim().length !== 0
}

interface Props {
  project: ProjectType
}

const { project } = Astro.props
---

<li class='project-container'>
  <div class='content-wrapper'>
    <p class='featured'>Featured</p>
    <h3 class='title'>{project.title}</h3>
    <p class='description'>{project.description}</p>
    <ul class='technologies'>
      {
        project.technologies.map((tech) => {
          return <li>{tech}</li>
        })
      }
    </ul>
    {/* Github link + icon */}
    {
      isNonEmpty(project.links.github) && (
        <Icon href={project.links.github || '#'} style={{ marginRight: '10px' }}>
          <FiGithub className='icon' style={{ scale: '1.2' }} />
        </Icon>
      )
    }

    {/* Project link + icon */}
    {
      isNonEmpty(project.links.project_url) && (
        <Icon href={project.links.project_url || '#'}>
          <FiExternalLink className='icon' style={{ scale: '1.3' }} />
        </Icon>
      )
    }
  </div>

  <div class='thumbnail-wrapper'>
    <a href={project.links.github}>
      <Image
        src={project.image_url}
        alt={`Thumbnail image describing the ${project.title} project `}
        width={500}
        height={500}
        class='thumbnail'
      />
    </a>
  </div>
</li>
<style lang='scss'>
  @use 'src/main' as *;

  .project-container {
    position: relative;
  }

  .thumbnail-wrapper {
    position: absolute;
    inset: 0;
    max-width: 100%;

    a {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
    }

    a::before {
      content: '';
      position: absolute;
      width: 100%;
      height: 100%;
      background: var(--gradient);
      mix-blend-mode: screen;
      opacity: 0.1;
      z-index: 1;
    }

    img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      object-position: center center;
      opacity: 0.1;
      mix-blend-mode: screen;
    }
  }
</style>
